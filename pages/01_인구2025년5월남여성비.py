import streamlit as st
import pandas as pd

# CSV ë¡œë“œ (EUC-KR ì¸ì½”ë”©)
df = pd.read_csv("202505_202505_ì£¼ë¯¼ë“±ë¡ì¸êµ¬ë°ì„¸ëŒ€í˜„í™©_ì›”ê°„ (1).csv", encoding='euc-kr')
df.columns = df.columns.str.strip()

# ì‰¼í‘œ ì œê±°, ìˆ«ì ë³€í™˜
cols_to_numeric = [
    '2025ë…„05ì›”_ì´ì¸êµ¬ìˆ˜',
    '2025ë…„05ì›”_ì„¸ëŒ€ìˆ˜',
    '2025ë…„05ì›”_ë‚¨ì ì¸êµ¬ìˆ˜',
    '2025ë…„05ì›”_ì—¬ì ì¸êµ¬ìˆ˜'
]
for col in cols_to_numeric:
    df[col] = df[col].str.replace(',', '').astype(int)

df['2025ë…„05ì›”_ë‚¨ì—¬ ë¹„ìœ¨'] = df['2025ë…„05ì›”_ë‚¨ì—¬ ë¹„ìœ¨'].astype(float)

# ì´ ì¸êµ¬ìˆ˜ ê¸°ì¤€ ìƒìœ„ 5ê°œ ì§€ì—­
top5 = df.sort_values(by='2025ë…„05ì›”_ì´ì¸êµ¬ìˆ˜', ascending=False).head(5)

# Streamlit í™”ë©´ êµ¬ì„±
st.title("2025ë…„ 5ì›” ì£¼ë¯¼ë“±ë¡ ì¸êµ¬ í˜„í™© (ë‚¨ì, ì—¬ì, ì„±ë¹„)")
st.write("### ğŸ“Š ì›ë³¸ ë°ì´í„° (ìƒìœ„ 5ê°œ í–‰ì •êµ¬ì—­)")
st.dataframe(top5)

# 1ï¸âƒ£ ë‚¨ì ì¸êµ¬ìˆ˜
st.write("### ğŸ‘¦ ìƒìœ„ 5ê°œ í–‰ì •êµ¬ì—­ ë‚¨ì ì¸êµ¬ìˆ˜")
st.line_chart(top5.set_index('í–‰ì •êµ¬ì—­')['2025ë…„05ì›”_ë‚¨ì ì¸êµ¬ìˆ˜'])

# 2ï¸âƒ£ ì—¬ì ì¸êµ¬ìˆ˜
st.write("### ğŸ‘© ìƒìœ„ 5ê°œ í–‰ì •êµ¬ì—­ ì—¬ì ì¸êµ¬ìˆ˜")
st.line_chart(top5.set_index('í–‰ì •êµ¬ì—­')['2025ë…„05ì›”_ì—¬ì ì¸êµ¬ìˆ˜'])

# 3ï¸âƒ£ ë‚¨ë…€ ë¹„ìœ¨
st.write("### âš–ï¸ ìƒìœ„ 5ê°œ í–‰ì •êµ¬ì—­ ë‚¨ë…€ ì„±ë¹„ (ì—¬ì 100ëª…ë‹¹ ë‚¨ì ìˆ˜)")
st.line_chart(top5.set_index('í–‰ì •êµ¬ì—­')['2025ë…„05ì›”_ë‚¨ì—¬ ë¹„ìœ¨'])

st.caption("ì¶œì²˜: 2025ë…„ 5ì›” ì£¼ë¯¼ë“±ë¡ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©")
