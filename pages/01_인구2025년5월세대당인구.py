import streamlit as st
import pandas as pd

# ë°ì´í„° ë¡œë“œ (EUC-KR)
df = pd.read_csv("202505_202505_ì£¼ë¯¼ë“±ë¡ì¸êµ¬ë°ì„¸ëŒ€í˜„í™©_ì›”ê°„.csv", encoding='euc-kr')

# ì‰¼í‘œ ì œê±°, ìˆ«ìí˜• ë³€í™˜
df['2025ë…„05ì›”_ì´ì¸êµ¬ìˆ˜'] = df['2025ë…„05ì›”_ì´ì¸êµ¬ìˆ˜'].str.replace(',', '').astype(int)
df['2025ë…„05ì›”_ì„¸ëŒ€ìˆ˜'] = df['2025ë…„05ì›”_ì„¸ëŒ€ìˆ˜'].str.replace(',', '').astype(int)
df['2025ë…„05ì›”_ì„¸ëŒ€ë‹¹ ì¸êµ¬'] = df['2025ë…„05ì›”_ì„¸ëŒ€ë‹¹ ì¸êµ¬'].astype(float)

# ìƒìœ„ 5ê°œ í–‰ì •êµ¬ì—­ (ì´ì¸êµ¬ìˆ˜ ê¸°ì¤€)
top5 = df.sort_values(by='2025ë…„05ì›”_ì´ì¸êµ¬ìˆ˜', ascending=False).head(5)

# Streamlit
st.title("2025ë…„ 5ì›” ê¸°ì¤€ ì£¼ë¯¼ë“±ë¡ ì„¸ëŒ€ë‹¹ ì¸êµ¬ìˆ˜ í˜„í™©")
st.write("### ğŸ“Š ì›ë³¸ ë°ì´í„° (ìƒìœ„ 5ê°œ í–‰ì •êµ¬ì—­)")
st.dataframe(top5)

# ì‹œê°í™”ìš© ë°ì´í„° ì¤€ë¹„
plot_data = top5.set_index('í–‰ì •êµ¬ì—­')['2025ë…„05ì›”_ì„¸ëŒ€ë‹¹ ì¸êµ¬']

# ì„  ê·¸ë˜í”„ ì¶œë ¥ (Streamlit ê¸°ë³¸)
st.write("### ğŸ“ˆ ìƒìœ„ 5ê°œ í–‰ì •êµ¬ì—­ ì„¸ëŒ€ë‹¹ ì¸êµ¬ìˆ˜")
st.line_chart(plot_data)

st.caption("ì¶œì²˜: 2025ë…„ 5ì›” ì£¼ë¯¼ë“±ë¡ì¸êµ¬ ë° ì„¸ëŒ€í˜„í™©")
